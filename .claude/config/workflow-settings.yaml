# å·¥ä½œæµç¨‹è¨­å®š
# æ§åˆ¶è‡ªå‹•åŒ–ç¨‹åº¦å’Œä½¿ç”¨è€…äº’å‹•æª¢æŸ¥é»
# ç‰ˆæœ¬: 2.0.0
# å»ºç«‹æ—¥æœŸ: 2025-10-24
# æ›´æ–°æ—¥æœŸ: 2025-11-11

# ============================================
# å·¥ä½œæµç¨‹æ¨¡å¼
# ============================================

workflow_mode:
  # æ¨¡å¼é¸æ“‡: auto (å…¨è‡ªå‹•) | semi-auto (åŠè‡ªå‹•,æœ‰æª¢æŸ¥é») | manual (æ‰‹å‹•)
  current_mode: "semi-auto"

  description: |
    - auto: ä¸€éµç”Ÿæˆ,ç„¡éœ€äººå·¥ä»‹å…¥
    - semi-auto: é—œéµéšæ®µéœ€è¦ä½¿ç”¨è€…ç¢ºèª
    - manual: æ¯å€‹æ­¥é©Ÿéƒ½éœ€è¦ä½¿ç”¨è€…è§¸ç™¼

# ============================================
# äº’å‹•æª¢æŸ¥é»é…ç½®
# ============================================

checkpoints:
  # æª¢æŸ¥é» 1: ç ”ç©¶å ±å‘Šå¯©æŸ¥
  research_review:
    enabled: true
    phase: "Phase 2"
    trigger: "research_report_generated"
    description: "ç ”ç©¶å®Œæˆå¾Œ,è®“ä½¿ç”¨è€…å¯©æŸ¥ç ”ç©¶å ±å‘Š"

    prompt_message: |
      ğŸ“Š ç ”ç©¶å ±å‘Šå·²å®Œæˆ!

      æª”æ¡ˆä½ç½®: output/session_{timestamp}/research_report.md

      è«‹å¯©æŸ¥:
      - âœ… ç†±é–€æ–‡ç« æ•¸é‡æ˜¯å¦è¶³å¤  (10-15ç¯‡)
      - âœ… å…±åŒæ¨¡å¼åˆ†ææ˜¯å¦æœ‰æ´å¯Ÿ
      - âœ… å¯«ä½œå»ºè­°æ˜¯å¦å…·é«”å¯åŸ·è¡Œ
      - âœ… é—œéµå­—å»ºè­°æ˜¯å¦ç¬¦åˆä¸»é¡Œ

      æ˜¯å¦ç¹¼çºŒé€²å…¥ Phase 3 (å…§å®¹å‰µä½œ)?

    options:
      - label: "ç¹¼çºŒ"
        action: "proceed"
        description: "ç ”ç©¶å ±å‘Šç¬¦åˆé æœŸ,é€²å…¥å…§å®¹å‰µä½œ"

      - label: "é‡æ–°ç ”ç©¶"
        action: "retry_research"
        description: "ç ”ç©¶ä¸è¶³,éœ€è¦èª¿æ•´é—œéµå­—æˆ–æ“´å¤§ç¯„åœ"

      - label: "æ‰‹å‹•ç·¨è¼¯"
        action: "pause_for_edit"
        description: "æš«åœå·¥ä½œæµç¨‹,æˆ‘è¦æ‰‹å‹•ä¿®æ”¹ç ”ç©¶å ±å‘Š"

    default_action: "proceed"
    timeout_seconds: 300  # 5åˆ†é˜ç„¡å›æ‡‰å‰‡è‡ªå‹•ç¹¼çºŒ

  # æª¢æŸ¥é» 2: é¢¨æ ¼æŒ‡å—å¯©æŸ¥
  style_guide_review:
    enabled: true
    phase: "Phase 2"
    trigger: "style_guide_generated"
    description: "é¢¨æ ¼èåˆç­–ç•¥å®Œæˆ,è®“ä½¿ç”¨è€…ç¢ºèªå¯«ä½œæ–¹å‘"

    prompt_message: |
      ğŸ¨ é¢¨æ ¼æŒ‡å—å·²ç”Ÿæˆ!

      æª”æ¡ˆä½ç½®: output/session_{timestamp}/style_guide.md

      è«‹å¯©æŸ¥:
      - âœ… æ¨è–¦çš„åƒè€ƒä½œè€…æ˜¯å¦åˆé©
      - âœ… é¢¨æ ¼èåˆç­–ç•¥æ˜¯å¦ç¬¦åˆå“ç‰Œèª¿æ€§
      - âœ… å¯«ä½œæŒ‡å¼•æ˜¯å¦æ˜ç¢º

      æ˜¯å¦ç¹¼çºŒæ’°å¯«æ–‡ç« ?

    options:
      - label: "ç¹¼çºŒ"
        action: "proceed"

      - label: "èª¿æ•´é¢¨æ ¼"
        action: "regenerate_style"
        description: "é‡æ–°é¸æ“‡åƒè€ƒä½œè€…æˆ–èª¿æ•´èåˆç­–ç•¥"

      - label: "è·³éé¢¨æ ¼æŒ‡å—"
        action: "skip_style"
        description: "ä½¿ç”¨é è¨­é¢¨æ ¼,ç›´æ¥é–‹å§‹å¯«ä½œ"

    default_action: "proceed"
    timeout_seconds: 300

  # æª¢æŸ¥é» 3: åˆç¨¿å¯©æŸ¥
  draft_review:
    enabled: true
    phase: "Phase 3"
    trigger: "draft_generated"
    description: "åˆç¨¿å®Œæˆ,è®“ä½¿ç”¨è€…æ±ºå®šæ˜¯å¦é€²å…¥ç·¨è¼¯å¯©æŸ¥"

    prompt_message: |
      âœï¸  åˆç¨¿å·²å®Œæˆ!

      æª”æ¡ˆä½ç½®: output/session_{timestamp}/draft_final.md
      å­—æ•¸: {word_count} å­—

      è«‹å¯©æŸ¥:
      - âœ… å…§å®¹æ˜¯å¦ç¬¦åˆé æœŸæ–¹å‘
      - âœ… çµæ§‹æ˜¯å¦å®Œæ•´
      - âœ… é—œéµä¿¡æ¯æ˜¯å¦æ¶µè“‹

      ä¸‹ä¸€æ­¥?

    options:
      - label: "é€²å…¥ç·¨è¼¯å¯©æŸ¥"
        action: "proceed_to_editor"
        description: "è®“ Editor Agent é€²è¡Œé‡åŒ–è©•ä¼°"

      - label: "ç›´æ¥å„ªåŒ–ç™¼å¸ƒ"
        action: "skip_editor"
        description: "è·³éç·¨è¼¯å¯©æŸ¥,ç›´æ¥é€²å…¥ SEO å„ªåŒ–"

      - label: "é‡å¯«"
        action: "rewrite"
        description: "å…§å®¹æ–¹å‘ä¸å°,éœ€è¦é‡æ–°æ’°å¯«"

      - label: "æ‰‹å‹•ä¿®æ”¹"
        action: "pause_for_edit"
        description: "æš«åœ,è®“æˆ‘å…ˆæ‰‹å‹•ä¿®æ”¹åˆç¨¿"

    default_action: "proceed_to_editor"
    timeout_seconds: 600  # 10åˆ†é˜

  # æª¢æŸ¥é» 4: ç·¨è¼¯å¯©æŸ¥çµæœ
  editor_review_decision:
    enabled: true
    phase: "Phase 3.5"
    trigger: "editor_review_completed"
    description: "Editor å¯©æŸ¥å®Œæˆ,æ ¹æ“šè©•åˆ†æ±ºå®šå¾ŒçºŒè¡Œå‹•"

    prompt_message: |
      ğŸ“ ç·¨è¼¯å¯©æŸ¥å®Œæˆ!

      è©•åˆ†: {score}/100 (è©•ç´š: {grade})
      æª”æ¡ˆ: output/session_{timestamp}/editor_review.md

      å•é¡Œæ‘˜è¦:
      - é«˜å„ªå…ˆç´š: {high_priority_count} å€‹
      - ä¸­å„ªå…ˆç´š: {medium_priority_count} å€‹
      - ä½å„ªå…ˆç´š: {low_priority_count} å€‹

      ä¸‹ä¸€æ­¥?

    # æ ¹æ“šè©•åˆ†è‡ªå‹•æ±ºç­–
    auto_decision_rules:
      - condition: "score >= 90"
        action: "proceed"
        message: "è©•åˆ†å„ªç§€,ç›´æ¥é€²å…¥ SEO å„ªåŒ–"

      - condition: "score >= 80 and high_priority_count == 0"
        action: "proceed"
        message: "è©•åˆ†è‰¯å¥½ä¸”ç„¡é«˜å„ªå…ˆç´šå•é¡Œ,é€²å…¥ SEO å„ªåŒ–"

      - condition: "score >= 70"
        action: "ask_user"
        message: "è©•åˆ†åŠæ ¼ä½†æœ‰æ”¹é€²ç©ºé–“,è©¢å•ä½¿ç”¨è€…æ„è¦‹"

      - condition: "score < 70"
        action: "ask_user"
        message: "è©•åˆ†ä¸åŠæ ¼,å»ºè­°ä¿®è¨‚"

    options:
      - label: "æ¥å—ä¸¦ç¹¼çºŒ"
        action: "proceed"
        description: "æ¥å—ç›®å‰å“è³ª,é€²å…¥ SEO å„ªåŒ–å’Œç™¼å¸ƒ"

      - label: "ä¿®è¨‚å•é¡Œ"
        action: "revise"
        description: "æ ¹æ“š Editor å»ºè­°ä¿®æ”¹æ–‡ç« "

      - label: "é‡å¯«"
        action: "rewrite"
        description: "å“è³ªä¸ä½³,éœ€è¦é‡æ–°æ’°å¯«"

      - label: "æ‰‹å‹•ä¿®æ”¹"
        action: "pause_for_edit"
        description: "æš«åœ,è®“æˆ‘æ‰‹å‹•è™•ç†å•é¡Œ"

    default_action: "revise"
    timeout_seconds: 600

  # æª¢æŸ¥é» 5: MCP åŠŸèƒ½ç¢ºèª (v2.0.0 æ–°å¢)
  mcp_features_check:
    enabled: true
    phase: "Phase 5"
    trigger: "wordpress_published"
    description: "WordPress ç™¼å¸ƒå®Œæˆå¾Œ,ç¢ºèªæ˜¯å¦åŸ·è¡Œ MCP æ•´åˆåŠŸèƒ½"

    prompt_message: |
      ğŸ“Š WordPress ç™¼å¸ƒå®Œæˆ!

      æª”æ¡ˆä½ç½®: output/session_{timestamp}/publish_report.md
      ç™¼å¸ƒç¶²å€: {wordpress_url}

      v2.0.0 æ–°åŠŸèƒ½ - MCP æ•´åˆ:
      - [ ] Phase 7: Analytics Reporter (çœŸå¯¦ GA æ•¸æ“šåˆ†æ)
      - [ ] Phase 8: Multi-Platform Publishing (Twitter + Notion)
      - [ ] Phase 9: A/B Testing (æ¨™é¡Œæ¸¬è©¦è¿½è¹¤)
      - [ ] Phase 10: Data Dashboard (æ•´åˆæ•¸æ“šå„€è¡¨æ¿)

      æ˜¯å¦åŸ·è¡Œ MCP æ•´åˆåŠŸèƒ½?

    options:
      - label: "åŸ·è¡Œå®Œæ•´ MCP æµç¨‹"
        action: "proceed_mcp_full"
        description: "åŸ·è¡Œ Phase 7-10 æ‰€æœ‰ MCP åŠŸèƒ½"

      - label: "åƒ…åŸ·è¡Œ Analytics"
        action: "analytics_only"
        description: "åªåŸ·è¡Œ Phase 7,ç²å– GA æ•¸æ“šå ±å‘Š"

      - label: "è·³é MCP åŠŸèƒ½"
        action: "skip_mcp"
        description: "ä¸ä½¿ç”¨ MCP åŠŸèƒ½,å·¥ä½œæµç¨‹çµæŸ"

    default_action: "proceed_mcp_full"
    timeout_seconds: 300

  # æª¢æŸ¥é» 6: Analytics æ•¸æ“šç¢ºèª (v2.0.0 æ–°å¢)
  analytics_review:
    enabled: true
    phase: "Phase 7"
    trigger: "analytics_report_generated"
    description: "Analytics Reporter å®Œæˆå¾Œ,æª¢è¦–çœŸå¯¦æµé‡æ•¸æ“š"

    prompt_message: |
      ğŸ“Š Analytics æ•¸æ“šå ±å‘Šå·²ç”Ÿæˆ!

      æª”æ¡ˆä½ç½®: output/session_{timestamp}/analytics_report.md

      è«‹å¯©æŸ¥:
      - âœ… GA æ•¸æ“šæ˜¯å¦æˆåŠŸè®€å– (æˆ–ä½¿ç”¨æ¨¡æ“¬æ•¸æ“š)
      - âœ… æµé‡è¶¨å‹¢åˆ†ææ˜¯å¦åˆç†
      - âœ… åœ–è¡¨æ˜¯å¦æ­£ç¢ºç”Ÿæˆ
      - âœ… æ”¹é€²å»ºè­°æ˜¯å¦å…·é«”å¯è¡Œ

      ä¸‹ä¸€æ­¥?

    options:
      - label: "ç¹¼çºŒå¤šå¹³å°ç™¼å¸ƒ"
        action: "proceed_to_phase8"
        description: "é€²å…¥ Phase 8: Twitter/Notion ç™¼å¸ƒ"

      - label: "åƒ…ç”Ÿæˆå„€è¡¨æ¿"
        action: "skip_to_dashboard"
        description: "è·³é Phase 8-9,ç›´æ¥ç”Ÿæˆ Phase 10 å„€è¡¨æ¿"

      - label: "çµæŸæµç¨‹"
        action: "finish"
        description: "çµæŸ v2.0.0 å·¥ä½œæµç¨‹"

    default_action: "proceed_to_phase8"
    timeout_seconds: 300

# ============================================
# å¿«é€Ÿæ¨¡å¼è¦†å¯«
# ============================================

quick_mode:
  # å¿«é€Ÿæ¨¡å¼: ç¦ç”¨æ‰€æœ‰æª¢æŸ¥é»,é©åˆæ‰¹æ¬¡å‰µä½œ
  enabled: false

  when_enabled:
    # å¿«é€Ÿæ¨¡å¼ä¸‹çš„è¡Œç‚º
    disable_all_checkpoints: true
    auto_approve_threshold: 70  # Editor è©•åˆ† >= 70 å°±è‡ªå‹•é€šé
    skip_style_matching: false  # ä»ç„¶ä½¿ç”¨å‹•æ…‹é¢¨æ ¼åŒ¹é…
    use_research_cache: true    # ç©æ¥µä½¿ç”¨å¿«å–

# ============================================
# é€šçŸ¥è¨­å®š
# ============================================

notifications:
  # æª¢æŸ¥é»é€šçŸ¥æ–¹å¼
  method: "console"  # console | file | webhook

  # æ§åˆ¶å°é¡è‰²
  colors:
    info: "blue"
    warning: "yellow"
    success: "green"
    error: "red"

  # è²éŸ³æç¤º(å¦‚æœæ”¯æ´)
  sound_enabled: false

# ============================================
# è¶…æ™‚è™•ç†
# ============================================

timeout_behavior:
  # æª¢æŸ¥é»è¶…æ™‚å¾Œçš„é è¨­è¡Œç‚º
  default_action: "proceed"  # proceed | pause | cancel

  # æ˜¯å¦è¨˜éŒ„è¶…æ™‚äº‹ä»¶
  log_timeouts: true

  # è¶…æ™‚æ—¥èªŒä½ç½®
  timeout_log: ".claude/logs/checkpoint_timeouts.log"

# ============================================
# æ‰¹æ¬¡æ¨¡å¼
# ============================================

batch_mode:
  # æ‰¹æ¬¡å‰µä½œæ™‚çš„æª¢æŸ¥é»ç­–ç•¥
  enabled: false

  when_enabled:
    # æ‰¹æ¬¡æ¨¡å¼ä¸‹,åªåœ¨ç‰¹å®šæ¢ä»¶è§¸ç™¼æª¢æŸ¥é»
    trigger_checkpoints_when:
      - "editor_score < 70"  # åªæœ‰è©•åˆ†ä¸åŠæ ¼æ‰æš«åœ
      - "high_priority_issues > 3"  # é«˜å„ªå…ˆç´šå•é¡Œè¶…é3å€‹

    # å…¶ä»–æƒ…æ³è‡ªå‹•ç¹¼çºŒ
    auto_proceed: true

# ============================================
# ä½¿ç”¨ç¯„ä¾‹
# ============================================

usage_examples:
  example1:
    scenario: "æ—¥å¸¸å–®ç¯‡å‰µä½œ"
    recommended_mode: "semi-auto"
    enabled_checkpoints: ["research_review", "draft_review", "editor_review_decision"]
    description: "ä¿ç•™é—œéµæª¢æŸ¥é»,ç¢ºä¿å“è³ª"

  example2:
    scenario: "æ‰¹æ¬¡å‰µä½œ 10 ç¯‡æ–‡ç« "
    recommended_mode: "auto"
    quick_mode: true
    description: "ç¦ç”¨æª¢æŸ¥é»,åªæœ‰è©•åˆ†<70æ‰æš«åœ"

  example3:
    scenario: "å¯¦é©—æ–°ä¸»é¡Œ"
    recommended_mode: "manual"
    enabled_checkpoints: "all"
    description: "æ¯å€‹éšæ®µéƒ½å¯©æŸ¥,ç¢ºä¿æ–¹å‘æ­£ç¢º"

# ============================================
# ç‰ˆæœ¬è¨˜éŒ„
# ============================================

version_history:
  - version: "2.6.0"
    date: "2025-12-14"
    changes: "æ–°å¢ Search Everywhere æ¨¡å¼ (LLMO/GEO/VSO/CRO/AISO å„ªåŒ–)"
    author: "ç³»çµ±å„ªåŒ–åœ˜éšŠ"

  - version: "2.0.0"
    date: "2025-11-11"
    changes: "æ–°å¢ Phase 6-10 MCP æ•´åˆæª¢æŸ¥é» (MCP åŠŸèƒ½ç¢ºèªã€Analytics æ•¸æ“šå¯©æŸ¥)"
    author: "ç³»çµ±å„ªåŒ–åœ˜éšŠ"

  - version: "1.0.0"
    date: "2025-10-24"
    changes: "åˆå§‹ç‰ˆæœ¬,å»ºç«‹ 4 å€‹äº’å‹•æª¢æŸ¥é»å’Œæ¨¡å¼é…ç½®"
    author: "ç³»çµ±å„ªåŒ–åœ˜éšŠ"
